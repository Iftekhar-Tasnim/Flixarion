{
    "info": {
        "name": "Flixarion API",
        "description": "Flixarion — Laravel 12 Backend API\n\nBase URL: http://127.0.0.1:8000/api",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "variable": [
        {
            "key": "base_url",
            "value": "http://127.0.0.1:8000/api"
        },
        {
            "key": "token",
            "value": ""
        },
        {
            "key": "admin_token",
            "value": ""
        }
    ],
    "item": [
        {
            "name": "Auth",
            "item": [
                {
                    "name": "Register",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "const res = pm.response.json();",
                                    "",
                                    "pm.test('Status 201', () => pm.response.to.have.status(201));",
                                    "pm.test('Has token', () => pm.expect(res.data.token).to.be.a('string'));",
                                    "pm.test('Has user', () => pm.expect(res.data.user.email).to.eql(pm.variables.get('test_email')));",
                                    "",
                                    "if (res.data && res.data.token) {",
                                    "    pm.collectionVariables.set('token', res.data.token);",
                                    "}"
                                ]
                            }
                        },
                        {
                            "listen": "prerequest",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "const email = 'test_' + Date.now() + '@example.com';",
                                    "pm.variables.set('test_email', email);"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application/json"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"name\": \"Test User\",\n    \"email\": \"{{test_email}}\",\n    \"password\": \"password123\",\n    \"password_confirmation\": \"password123\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/auth/register",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "auth",
                                "register"
                            ]
                        }
                    }
                },
                {
                    "name": "Register — Duplicate Email (422)",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('Status 422', () => pm.response.to.have.status(422));",
                                    "pm.test('Has email error', () => {",
                                    "    const res = pm.response.json();",
                                    "    pm.expect(res.errors.email).to.be.an('array');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application/json"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"name\": \"Duplicate User\",\n    \"email\": \"{{test_email}}\",\n    \"password\": \"password123\",\n    \"password_confirmation\": \"password123\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/auth/register",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "auth",
                                "register"
                            ]
                        }
                    }
                },
                {
                    "name": "Register — Missing Fields (422)",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('Status 422', () => pm.response.to.have.status(422));",
                                    "pm.test('Has validation errors', () => {",
                                    "    const res = pm.response.json();",
                                    "    pm.expect(res.errors).to.have.property('name');",
                                    "    pm.expect(res.errors).to.have.property('email');",
                                    "    pm.expect(res.errors).to.have.property('password');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application/json"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{}"
                        },
                        "url": {
                            "raw": "{{base_url}}/auth/register",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "auth",
                                "register"
                            ]
                        }
                    }
                },
                {
                    "name": "Login",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "const res = pm.response.json();",
                                    "",
                                    "pm.test('Status 200', () => pm.response.to.have.status(200));",
                                    "pm.test('Has token', () => pm.expect(res.data.token).to.be.a('string'));",
                                    "pm.test('Has user object', () => pm.expect(res.data.user).to.have.property('id'));",
                                    "",
                                    "if (res.data && res.data.token) {",
                                    "    pm.collectionVariables.set('token', res.data.token);",
                                    "}"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application/json"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"email\": \"{{test_email}}\",\n    \"password\": \"password123\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/auth/login",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "auth",
                                "login"
                            ]
                        }
                    }
                },
                {
                    "name": "Login — Wrong Password (401)",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('Status 401', () => pm.response.to.have.status(401));",
                                    "pm.test('Has error message', () => {",
                                    "    const res = pm.response.json();",
                                    "    pm.expect(res.error).to.eql(true);",
                                    "    pm.expect(res.message).to.be.a('string');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application/json"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"email\": \"{{test_email}}\",\n    \"password\": \"wrongpassword\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/auth/login",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "auth",
                                "login"
                            ]
                        }
                    }
                },
                {
                    "name": "Me — Get Profile",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "const res = pm.response.json();",
                                    "",
                                    "pm.test('Status 200', () => pm.response.to.have.status(200));",
                                    "pm.test('Has user data', () => {",
                                    "    pm.expect(res.data).to.have.property('id');",
                                    "    pm.expect(res.data).to.have.property('name');",
                                    "    pm.expect(res.data).to.have.property('email');",
                                    "});",
                                    "pm.test('No password exposed', () => {",
                                    "    pm.expect(res.data).to.not.have.property('password');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/auth/me",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "auth",
                                "me"
                            ]
                        }
                    }
                },
                {
                    "name": "Me — Unauthenticated (401)",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('Status 401', () => pm.response.to.have.status(401));"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application/json"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/auth/me",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "auth",
                                "me"
                            ]
                        }
                    }
                },
                {
                    "name": "Logout",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "type": "text/javascript",
                                "exec": [
                                    "pm.test('Status 204', () => pm.response.to.have.status(204));",
                                    "pm.collectionVariables.set('token', '');"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/auth/logout",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "auth",
                                "logout"
                            ]
                        }
                    }
                }
            ]
        },
        {
            "name": "Content",
            "item": [
                {
                    "name": "Browse All",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application/json"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/contents?per_page=20&sort=recent",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "contents"
                            ],
                            "query": [
                                {
                                    "key": "per_page",
                                    "value": "20"
                                },
                                {
                                    "key": "sort",
                                    "value": "recent"
                                }
                            ]
                        }
                    }
                },
                {
                    "name": "Filter by Type (movie)",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application/json"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/contents?type=movie",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "contents"
                            ],
                            "query": [
                                {
                                    "key": "type",
                                    "value": "movie"
                                }
                            ]
                        }
                    }
                },
                {
                    "name": "Filter by Genre",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application/json"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/contents?genre=action",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "contents"
                            ],
                            "query": [
                                {
                                    "key": "genre",
                                    "value": "action"
                                }
                            ]
                        }
                    }
                },
                {
                    "name": "Trending",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application/json"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/contents?sort=trending",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "contents"
                            ],
                            "query": [
                                {
                                    "key": "sort",
                                    "value": "trending"
                                }
                            ]
                        }
                    }
                },
                {
                    "name": "Search",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application/json"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/contents/search?q=batman",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "contents",
                                "search"
                            ],
                            "query": [
                                {
                                    "key": "q",
                                    "value": "batman"
                                }
                            ]
                        }
                    }
                },
                {
                    "name": "Show Detail",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Accept",
                                "value": "application/json"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/contents/1",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "contents",
                                "1"
                            ]
                        }
                    }
                }
            ]
        },
        {
            "name": "User Library",
            "item": [
                {
                    "name": "Combined Library",
                    "request": {
                        "method": "GET",
                        "header": [
                            { "key": "Accept", "value": "application/json" },
                            { "key": "Authorization", "value": "Bearer {{token}}" }
                        ],
                        "url": {
                            "raw": "{{base_url}}/user/library",
                            "host": ["{{base_url}}"],
                            "path": ["user", "library"]
                        }
                    }
                },
                {
                    "name": "View Watchlist",
                    "request": {
                        "method": "GET",
                        "header": [
                            { "key": "Accept", "value": "application/json" },
                            { "key": "Authorization", "value": "Bearer {{token}}" }
                        ],
                        "url": {
                            "raw": "{{base_url}}/user/watchlist",
                            "host": ["{{base_url}}"],
                            "path": ["user", "watchlist"]
                        }
                    }
                },
                {
                    "name": "Add to Watchlist",
                    "request": {
                        "method": "POST",
                        "header": [
                            { "key": "Accept", "value": "application/json" },
                            { "key": "Content-Type", "value": "application/json" },
                            { "key": "Authorization", "value": "Bearer {{token}}" }
                        ],
                        "body": { "mode": "raw", "raw": "{\n    \"content_id\": 1\n}" },
                        "url": {
                            "raw": "{{base_url}}/user/watchlist",
                            "host": ["{{base_url}}"],
                            "path": ["user", "watchlist"]
                        }
                    }
                },
                {
                    "name": "Remove from Watchlist",
                    "request": {
                        "method": "DELETE",
                        "header": [
                            { "key": "Accept", "value": "application/json" },
                            { "key": "Authorization", "value": "Bearer {{token}}" }
                        ],
                        "url": {
                            "raw": "{{base_url}}/user/watchlist/1",
                            "host": ["{{base_url}}"],
                            "path": ["user", "watchlist", "1"]
                        }
                    }
                },
                {
                    "name": "View Favorites",
                    "request": {
                        "method": "GET",
                        "header": [
                            { "key": "Accept", "value": "application/json" },
                            { "key": "Authorization", "value": "Bearer {{token}}" }
                        ],
                        "url": {
                            "raw": "{{base_url}}/user/favorites",
                            "host": ["{{base_url}}"],
                            "path": ["user", "favorites"]
                        }
                    }
                },
                {
                    "name": "Add to Favorites",
                    "request": {
                        "method": "POST",
                        "header": [
                            { "key": "Accept", "value": "application/json" },
                            { "key": "Content-Type", "value": "application/json" },
                            { "key": "Authorization", "value": "Bearer {{token}}" }
                        ],
                        "body": { "mode": "raw", "raw": "{\n    \"content_id\": 1\n}" },
                        "url": {
                            "raw": "{{base_url}}/user/favorites",
                            "host": ["{{base_url}}"],
                            "path": ["user", "favorites"]
                        }
                    }
                },
                {
                    "name": "Remove from Favorites",
                    "request": {
                        "method": "DELETE",
                        "header": [
                            { "key": "Accept", "value": "application/json" },
                            { "key": "Authorization", "value": "Bearer {{token}}" }
                        ],
                        "url": {
                            "raw": "{{base_url}}/user/favorites/1",
                            "host": ["{{base_url}}"],
                            "path": ["user", "favorites", "1"]
                        }
                    }
                },
                {
                    "name": "Record Play",
                    "request": {
                        "method": "POST",
                        "header": [
                            { "key": "Accept", "value": "application/json" },
                            { "key": "Content-Type", "value": "application/json" },
                            { "key": "Authorization", "value": "Bearer {{token}}" }
                        ],
                        "body": { "mode": "raw", "raw": "{\n    \"content_id\": 1\n}" },
                        "url": {
                            "raw": "{{base_url}}/user/history",
                            "host": ["{{base_url}}"],
                            "path": ["user", "history"]
                        }
                    }
                },
                {
                    "name": "View History",
                    "request": {
                        "method": "GET",
                        "header": [
                            { "key": "Accept", "value": "application/json" },
                            { "key": "Authorization", "value": "Bearer {{token}}" }
                        ],
                        "url": {
                            "raw": "{{base_url}}/user/history",
                            "host": ["{{base_url}}"],
                            "path": ["user", "history"]
                        }
                    }
                }
            ]
        }
    ]
}
